 CREATE TABLE Customer 
(CustNo VARCHAR2(8) CONSTRAINT CustNoNotNull NOT NULL, 
 CustName VARCHAR2(30) CONSTRAINT CustNameNotNull NOT NULL, 
 Address VARCHAR2(50) CONSTRAINT AddressNotNull NOT NULL, 
 Internal CHAR(1) CONSTRAINT InternalNotNull NOT NULL, 
 Contact VARCHAR2(35) CONSTRAINT ContractNotNull NOT NULL, 
 Phone VARCHAR2(11) CONSTRAINT CPhoneNotNull NOT NULL, 
 City VARCHAR2(30) CONSTRAINT CityNotNull NOT NULL,
 State VARCHAR2(2) CONSTRAINT StateNotNull NOT NULL, 
 Zip VARCHAR2(10) CONSTRAINT zipNotNull NOT NULL,
  CONSTRAINT PK_CUSTOMER PRIMARY KEY (CustNo) ) ;

CREATE TABLE Facility
(FacNo VARCHAR2(8) CONSTRAINT FacNoNotNull NOT NULL, 
 FacName VARCHAR2(30) CONSTRAINT FacNameNotNull NOT NULL,
   CONSTRAINT PK_FACILITY PRIMARY KEY (FacNo) ,
   CONSTRAINT Unique_FacName UNIQUE(FacName) );


CREATE TABLE Location
(LocNo VARCHAR2(8) CONSTRAINT LocNoNotNull NOT NULL, 
 FacNo VARCHAR2(8) CONSTRAINT FacNoFKNotNull NOT NULL, 
 LocName VARCHAR2(30) CONSTRAINT LocNameNotNull NOT NULL,
   CONSTRAINT PK_LOCATION PRIMARY KEY (LocNo),
   CONSTRAINT FK_FACNO FOREIGN KEY (FacNo) 
       REFERENCES FACILITY (FacNo) );
	   
CREATE TABLE Employee 
(
 Empno VARCHAR2(8) CONSTRAINT EmpNoNotNull NOT NULL, 
 Empname VARCHAR2(30) CONSTRAINT EmpNameNotNull NOT NULL, 
 Department VARCHAR2(50) CONSTRAINT DeptNotNull NOT NULL, 
 Email VARCHAR2(30) CONSTRAINT EmailNotNull NOT NULL, 
 Phone  VARCHAR2(30) CONSTRAINT EmpNameNotNull NOT NULL, 
  CONSTRAINT PK_EMPLOYEE PRIMARY KEY (Empno)
 ) ;


CREATE TABLE ResourceTbl
(
 Resno VARCHAR2(8) CONSTRAINT ResNoNotNull NOT NULL, 
 Resname VARCHAR2(30) CONSTRAINT ResNameNotNull NOT NULL, 
 Rate NUMBER(19,4) CONSTRAINT RateNotNull NOT NULL, 
  CONSTRAINT PK_RESOURCETBL PRIMARY KEY (Resno),
  CONSTRAINT CK_RATE CHECK (Rate>0)

) ;
	  
	   
CREATE TABLE EventRequest
(
 Eventno VARCHAR2(8) CONSTRAINT EventNoNotNull NOT NULL, 
 Dateheld Date CONSTRAINT DateHeldNotNull NOT NULL, 
 Datereq Date CONSTRAINT DateReqNotNull NOT NULL, 
 Facno VARCHAR2(8) CONSTRAINT EventRequestFacNoNotNull NOT NULL, 
 Custno VARCHAR2(8) CONSTRAINT  EventRequestCustNoNotNull NOT NULL, 
 Dateauth Date, 
 Status VARCHAR2(10) CONSTRAINT StatusNotNull NOT NULL, 
 Estcost NUMBER(19,4) CONSTRAINT EstcostNotNull NOT NULL, 
 Estaudience Number CONSTRAINT EstaudiencNotNull NOT NULL,
 Budno VARCHAR2(8), 
  CONSTRAINT PK_EVENTREQUEST PRIMARY KEY (Eventno),
  CONSTRAINT FK_CUSTNO FOREIGN KEY (Custno) 
                  REFERENCES Customer (CustNo),
  CONSTRAINT FK_EVENTREQUESTFACNO FOREIGN KEY (Facno) 
                  REFERENCES FACILITY (FacNo), 
  CONSTRAINT CK_STATUS CHECK (Status IN ('Pending','Denied', 'Approved')),
  CONSTRAINT CK_ESTAUDIENCE CHECK (Estaudience>0)

) ;


CREATE TABLE EventPlan
(
 Planno VARCHAR2(8) CONSTRAINT PlanNoNotNull NOT NULL, 
 Eventno VARCHAR2(8) CONSTRAINT EventPlanEventNoNotNull NOT NULL, 
 Workdate Date CONSTRAINT WorkdateNotNull NOT NULL, 
 Notes VARCHAR2(35), 
 Activity VARCHAR2(35) CONSTRAINT ActivityNotNull NOT NULL, 
 Empno VARCHAR2(8),
  CONSTRAINT PK_EVENTPLAN PRIMARY KEY (Planno),
  CONSTRAINT FK_EVENTNO FOREIGN KEY (Eventno)
                  REFERENCES EventRequest(Eventno),
  CONSTRAINT FK_EMPNO FOREIGN KEY (Empno) 
                  REFERENCES EMPLOYEE(Empno) 

 ) ;


CREATE TABLE EventPlanLine
(
 PlanNo VARCHAR2(8) CONSTRAINT EventPlanLinePlanNoNotNull NOT NULL, 
 LineNo VARCHAR2(8) CONSTRAINT LineNoNotNull NOT NULL, 
 TimeStart Date CONSTRAINT TimeStartNotNull NOT NULL, 
 TimeEnd Date CONSTRAINT TimeEndNotNull NOT NULL, 
 NumberFld Number CONSTRAINT NumberFldNotNull NOT NULL, 
 LocNo VARCHAR2(8) CONSTRAINT EventPlanLineLocNoNotNull NOT NULL, 
 ResNo VARCHAR2(8) CONSTRAINT EventPlanLineResNoNotNull NOT NULL,  
  CONSTRAINT PK_EVENTPLANLINE PRIMARY KEY (PlanNo,LineNo),
  CONSTRAINT FK_PLANNO FOREIGN KEY (PlanNo)
                  REFERENCES EventPlan(Planno),
  CONSTRAINT FK_LOCNO FOREIGN KEY (LocNo) 
                  REFERENCES LOCATION(LocNo),
  CONSTRAINT FK_RESNO FOREIGN KEY (ResNo) 
                  REFERENCES ResourceTbl(Resno), 
  CONSTRAINT CK_TIMEPERIOD CHECK (TimeStart<TimeEnd)
 ) ;

 

